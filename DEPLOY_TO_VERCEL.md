# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ CRUSTA MIA Backend –Ω–∞ Vercel

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `https://github.com/preff23/pizzaback.git` –≥–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Vercel.

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### 1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Vercel Dashboard
- –û—Ç–∫—Ä–æ–π—Ç–µ [vercel.com](https://vercel.com)
- –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç

### 2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
- –ù–∞–∂–º–∏—Ç–µ **"New Project"**
- –í—ã–±–µ—Ä–∏—Ç–µ **"Import Git Repository"**
- –ù–∞–π–¥–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `preff23/pizzaback`
- –ù–∞–∂–º–∏—Ç–µ **"Import"**

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
- **Project Name**: `crusta-mia-server` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∏–º—è)
- **Framework Preset**: `Other` (–∏–ª–∏ `Node.js`)
- **Root Directory**: `./` (–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **Build Command**: `npm run vercel-build` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- **Output Directory**: `dist` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

### 4. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í —Ä–∞–∑–¥–µ–ª–µ **"Environment Variables"** –¥–æ–±–∞–≤—å—Ç–µ:

```
TELEGRAM_BOT_TOKEN = 7987254482:AAGlsDPVkKCzvqFRoJMfgNk37Dpt4qbLGfM
TG_PROVIDER_TOKEN = <–ÆKassa Test provider_token –∏–∑ BotFather>
PAYMENTS_CURRENCY = RUB
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ –ÆKassa Test —Ç–æ–∫–µ–Ω–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí **Bot Settings** ‚Üí **Payments**
3. **Connect Provider** ‚Üí **–ÆKassa**
4. –í–≤–µ–¥–∏—Ç–µ:
   - **Shop ID**: `1160131`
   - **API Key**: `test_UVAGYl4S0bRIjQBiIAZx-S1YMcLTjy49zpAtcj4_CeU`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `provider_token`

### 5. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
- –ù–∞–∂–º–∏—Ç–µ **"Deploy"**
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ (2-3 –º–∏–Ω—É—Ç—ã)

### 6. –ü–æ–ª—É—á–∏—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞
–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞:
```
https://crusta-mia-server-xxx.vercel.app
```

## üîó –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è URL —Å–µ—Ä–≤–µ—Ä–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `crusta-mia-telegram-webapp`
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `src/pages/CartPage.tsx`
3. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```typescript
: 'https://crusta-mia-server.vercel.app');  // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL
```
4. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
```typescript
: 'https://crusta-mia-server-xxx.vercel.app');  // –†–µ–∞–ª—å–Ω—ã–π URL
```
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API:

```bash
curl -X POST https://your-server-url.vercel.app/api/pay \
  -H "Content-Type: application/json" \
  -d '{"userId":123,"cart":{"id":12345,"items":[{"id":"1","name":"–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞","price":830,"qty":1}],"total":830}}'
```

## üì± Telegram Bot

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
- **Username**: `@crusta_mia_bot`
- **Webhook URL**: –ù–µ –Ω—É–∂–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è polling)
- **Payments**: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ PayMaster Test

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥: `https://pizzatest-orcin.vercel.app`
- ‚úÖ –ë—ç–∫–µ–Ω–¥: `https://your-server-url.vercel.app`
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ Telegram
- ‚úÖ –û—à–∏–±–∫–∞ "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑" –∏—Å—á–µ–∑–Ω–µ—Ç

## üîß Troubleshooting

### –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü–ª–∞—Ç–µ–∂–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
